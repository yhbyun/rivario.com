<!-- .slide: data-background="#EEEAE1" class="light"-->

![](http://og.github.com/atom-mark/atom-mark@1200x630.png)
<h2>ATOM-SHELL / ALARM CLOCK</h2>

YongHun Byun
[@river](http://twitter.com/river)

---

<!-- .slide: data-background="#fff" class="light"-->

# HTML Application

---

<!-- .slide: data-background="#fff" class="light"-->

## Chrome Dev Tools

<img src="/img/chrome-dev-tools-inspect.png">

---

<!-- .slide: data-background="#fff" class="light"-->

## ATOM.IO

<img src="/img/atom-editor.png">

---

## Atom Shell

> The Atom Shell framework lets you write cross-platform desktop applications using
> JavaScript, HTML and CSS. It is based on [node.js](http://nodejs.org) and [Chromium](http://www.chromium.org/)
> and is used in the [Atom editor](https://github.com/atom/atom).

---

<!-- .slide: data-background="#e9e9e9" class="light"-->

## First Attempt ?

<a href=""><img src="data:image/jpeg;base64,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"></a>

<a href="https://github.com/adobe/brackets-shell"><img src="http://clintberry.com/images/branding_256.png" style="max-width:200px;margin-bottom:0"><br><span style="font-size:0.8em">brackets-shell</span></a>

---

<!-- .slide: data-background="#fff" class="light"-->

## Node-Webkit

<img src="https://camo.githubusercontent.com/e0447e41c8816ba0c361d4632afedd45d2321bd4/687474703a2f2f7061642e6861726f6f70726573732e636f6d2f6173736574732f696d616765732f72656c656173652d76302e342e382e706e67" style="max-height:60%">

### [App List](https://github.com/rogerwang/node-webkit/wiki/List-of-apps-and-companies-using-node-webkit)

---

<!-- .slide: data-background="#EEEAE1" class="light"-->

![](http://og.github.com/atom-mark/atom-mark@1200x630.png)

## Atom Shell

---

<!-- .slide: data-background="#000" -->

## Chromium Browser

<img src="/img/atom-shell1.png">

<div class="reference">https://speakerdeck.com/zcbenz/practice-on-embedding-node-dot-js-into-atom-editor</div>

---

<!-- .slide: data-background="#000" -->

## Atom Shell

<img src="/img/atom-shell2.png">

<div class="reference">https://speakerdeck.com/zcbenz/practice-on-embedding-node-dot-js-into-atom-editor</div>

---

<!-- .slide: data-background="#EEEAE1" class="light"-->

## Node.js in Atom Shell

- `Atom Shell` has embeded `Node.js` in both `Chromium browser`'s browser process and renderer process
- JavaScript in browser process can do GUI related operations like creating windows and menus
- javaScript in renderer process can use `Node.js` API in addition to standard DOM.

---

<!-- .slide: data-background="#000" -->

## Event Loop of Atom Shell

<img src="/img/atom-shell3.png">

<div class="reference">https://speakerdeck.com/zcbenz/practice-on-embedding-node-dot-js-into-atom-editor</div>

---

<!-- .slide: data-background="#EEEAE1" class="light"-->

## Node-Webkit vs Atom Shell

<ul>
	<li>Entry of application<br>
  	<div style="font-size:80%">Node-Webkit : html page</div>
  	<div style="font-size:80%">Atom-shell : JavaScript</div>
  	<br>
	</li>
	<li>Build system<br>
 	<div style="font-size:80%">Atom-shell uses <a href="https://github.com/brightray/libchromiumcontent">libchromiumcontent</a> to access `Chromium's Content API`, so when compiling atom-shell do not have to compile the entire Chromium.</div>
  	<br>
 	</li>
 	<li>Node Integration<br>
 	<div style="font-size:80%">Node-Webkit needs Chromium patch</div>
 	<div style="font-size:80%">Atom-shell integration libuv loop through the message loop and avoid Chromium platform patch.</div>
  	<br>
 	</li>
 	<li>Multi-context<br>
 	<div style="font-size:80%">Node-Webkit created Node context and web context</div>
 	<div style="font-size:80%">Atom-shell uses Multi-context features of Node</div>
  	<br>
 	</li>
</ul>

<div class="reference">https://github.com/atom/atom-shell/blob/master/docs/development/atom-shell-vs-node-webkit.md</div>

---

<!-- .slide: data-background="#EEEAE1" class="light"-->

## Hello World

```
$ git clone https://gist.github.com/427fe11ad6beb8b276fb.git demo1
$ npm install
$ grunt
```

---

<!-- .slide: data-background="#EEEAE1" class="light"-->

# Alarm Clock

---

<!-- .slide: data-background="#EEEAE1" class="light"-->

<img src="https://raw.githubusercontent.com/yhbyun/resources/master/alarm-clock/screenshot4.png">

https://github.com/yhbyun/alarm-clock

---

<!-- .slide: data-background="#fff" class="light"-->

## SW Architecture

<img src="https://raw.githubusercontent.com/yhbyun/resources/master/alarm-clock/alarm-clock-system.png">

---

<!-- .slide: data-background="#EEEAE1" class="light"-->

### Used Software

- atom-shell v0.15.2
- node.js 0.11.13
  - node-lame
  - node-speaker
- polymer
- javascript library
  - later.js

---

<!-- .slide: data-background="#EEEAE1" class="light"-->

### Create Window in main.js

```javascript
var BW = require('browser-window');

app.on('ready', function() {
  win = new BW({
    width  : 400,
    height : 600,
    frame: false,
    title: 'Alarm Clock'
  });
```

---

<!-- .slide: data-background="#fff" class="light"-->

### Atom Shell Processes

![](/img/atom-shell-process.png)

---

<!-- .slide: data-background="#eeeae1" class="light"-->

## Process Communication

### IPC
### remote

---


<!-- .slide: data-background="#eeeae1" class="light"-->

### Dialog Request in app.js (IPC)

```javascript
document.getElementById('btn-file').onclick = function() {
  ipc.send('asynchronous-message', 'select-file');
};
```

---

<!-- .slide: data-background="#eeeae1" class="light"-->

### Open Dialog in main.js (IPC)

```javascript
ipc.on('asynchronous-message', function(event, arg) {
  var files;

  switch (arg) {
    case 'select-file':
      files = dialog.showOpenDialog();
      event.sender.send('asynchronous-reply', files[0]);
```

---

<!-- .slide: data-background="#eeeae1" class="light"-->

### Recv File in app.js (IPC)

```javascript
ipc.on('asynchronous-reply', function(arg) {
  player.song = arg;
  player.getID3(displayMP3Title);
});
```

---

<!-- .slide: data-background="#EEEAE1" class="light"-->

### Screen Capture in app.js (remote)

```javascript
var remote = require('remote');

document.getElementById('btn-capture').onclick = function() {
  remote.getCurrentWindow().capturePage(function(buf) {
    remote.require('fs').writeFile(
      '/tmp/screenshot.png',
      buf, function(err) {
        console.log(err);
    });
  });
};
```

---

<!-- .slide: data-background="#fff" class="light"-->

## Polymer

![](http://blog.etc.cmu.edu/summerexperience/files/2014/07/polymer-logo.png)

---

<!-- .slide: data-background="#EEEAE1" class="light"-->

## Data Binding in Polymer

<pre><code class="html" style="font-size:0.5em"><polymer-element name="my-schedule" attributes="schedule" on-change="{{changeHandler}}">
  <template>
    <style>
    paper-input {text-align:left}
    </style>
    <paper-input floatingLabel label="Enter Schedule" value="{{schedule}}"></paper-input>
    <core-localstorage name="alarm-schedule" value="{{schedule}}"></core-localstorage>
  </template>
  <script>
    Polymer('my-schedule', {
      ready: function() {
        this.schedule = this.schedule || [];
      },
      changeHandler: function(event, detail, sender) {
        this.fire('scheduleChange', {msg: 'schedule changed'});
      }
    });
  </script>
</polymer-element>
</code></pre>

---

<!-- .slide: data-background="#EEEAE1" class="light"-->

## Wrap Up

- Cross-platform application
	- Node-webkit, brackets-shell, atom-shell
	- Chrome App
	- ...

- Atom-shell
    - Hot!!!
	- Node 0.11.13  (process.version)
	- Polymer

---

<!-- .slide: data-background="https://s3.amazonaws.com/media-p.slid.es/uploads/contra/images/65997/m9WRR1h.jpg" -->

## Questions?

---

<!-- .slide: data-background="#EEEAE1" class="light"-->

# Thank You !!!

